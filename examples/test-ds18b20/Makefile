APPLICATION = test-ds18b20
BOARD ?= berta-h10
BASE ?= $(CURDIR)/../../..
LORA3ABASE ?= $(BASE)/lora3a-boards
RIOTBASE ?= $(BASE)/RIOT
EXTERNAL_BOARD_DIRS=$(LORA3ABASE)/boards
EXTERNAL_MODULE_DIRS+=$(LORA3ABASE)/modules
EXTERNAL_PKG_DIRS=$(LORA3ABASE)/pkg
DEVELHELP ?= 1
QUIET ?= 1
PORT ?= /dev/ttyUSB0

USEMODULE += printf_float
USEMODULE += saml21_backup_mode

# DS18
USEMODULE += ds18

ACME_PORT ?= 0

ifeq ($(ACME_PORT), 0)
CFLAGS += -DACME0_BUS_MODE=MODE_POWERED
CFLAGS += -DDS18_PWR_PIN=ACME0_POWER_PIN
CFLAGS += -DDS18_PARAM_PIN=GPIO_PIN\(PA,18\)
CFLAGS += -DDS18_PARAM_PULL=GPIO_OD_PU
endif

ifeq ($(ACME_PORT), 1)
CFLAGS += -DACME1_BUS_MODE=MODE_POWERED
CFLAGS += -DDS18_PWR_PIN=ACME1_POWER_PIN
CFLAGS += -DDS18_PARAM_PIN=GPIO_PIN\(PB,22\)
CFLAGS += -DDS18_PARAM_PULL=GPIO_OD_PU
endif

ifeq ($(ACME_PORT), 2)
CFLAGS += -DACME2_BUS_MODE=MODE_POWERED
CFLAGS += -DDS18_PWR_PIN=ACME2_POWER_PIN
CFLAGS += -DDS18_PARAM_PIN=GPIO_PIN\(PA,06\)
CFLAGS += -DDS18_PARAM_PULL=GPIO_OD_PU
endif

include $(RIOTBASE)/Makefile.include
include $(LORA3ABASE)/Makefile.include